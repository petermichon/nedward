(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))t(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&t(s)}).observe(document,{childList:!0,subtree:!0});function e(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function t(o){if(o.ep)return;o.ep=!0;const r=e(o);fetch(o.href,r)}})();function b(n){const a=`https://www.youtube.com/oembed?url=https://www.youtube.com/watch?v=${n.id}&format=json`,e=`https://img.youtube.com/vi/${n.id}/maxresdefault.jpg`,t=document.createElement("div");t.className="relative overflow-hidden bg-white p-0 hover:scale-100 transition-all duration-180 md:rounded-lg bg-white text-black dark:bg-neutral-900 dark:text-white";const o=document.createElement("div");o.className="rounded-md aspect-video relative bg-gray-50 dark:bg-neutral-800",t.appendChild(o);const r=document.createElement("div");r.className="h-7 m-3 rounded-lg animate-pulse z-10 bg-gray-200 dark:bg-neutral-700",t.appendChild(r);const s=document.createElement("div");s.className="h-2 m-2 w-1/4 rounded-full animate-pulse bg-gray-200 dark:bg-neutral-700",t.appendChild(s);{const c=document.createElement("div");c.className="h-1 sm:hidden bg-gray-200 dark:bg-neutral-700",t.appendChild(c)}return fetch(a).then(c=>c.json()).then(c=>{{const l=document.createElement("img");l.src=e,l.className="sm:rounded-md relative w-full h-full aspect-video object-cover opacity-0 transition-opacity duration-500 z-1",l.loading="lazy",l.onload=()=>{l.classList.add("opacity-100")},o.appendChild(l)}{const l=document.createElement("img");l.src=e,l.className="absolute inset-0 w-full h-full object-cover z-0 opacity-20 blur-3xl scale-80 saturate-1000 contrast-100 brightness-100 dark:contrast-20",l.loading="lazy",t.appendChild(l)}{const l=document.createElement("p");l.textContent=c.title,l.className="relative text-sm text-black line-clamp-2 items-center align-center m-2 z-1 min-h-[3rem] leading-[1.5rem] text-black dark:text-white",l.style="font-family: 'Roboto', sans-serif",r.replaceWith(l)}{const l=document.createElement("p");l.textContent=c.author_name,l.className="relative bottom-0 text-xs m-2 line-clamp-2 z-1 text-gray-500 dark:text-gray-400",l.style="font-family: 'Roboto', sans-serif",l.style.cursor="pointer",s.replaceWith(l)}t.style.cursor="pointer",t.addEventListener("click",()=>{const l=new CustomEvent("video-click",{detail:{video:n}});t.dispatchEvent(l)})}),t}function E(n){const a=document.createElement("div");{const e=document.createElement("div");e.className="sm:p-3 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 p-0 sm:gap-3 bg-white text-black dark:bg-neutral-900 dark:text-white",a.appendChild(e);for(const t of n){const o=b(t);e.appendChild(o),o.addEventListener("video-click",r=>{const s=new CustomEvent("video-click",{detail:{video:t}});a.dispatchEvent(s)})}}return a}function w(n){const a=document.createElement("div");a.className="relative w-full aspect-video lg:aspect-[2.15/1]";{const e=`https://www.youtube-nocookie.com/embed/${n.id}?start=${n.time}`,t=document.createElement("iframe");t.setAttribute("sandbox","allow-presentation allow-same-origin allow-scripts"),t.style.margin="0px",t.style.padding="0px",t.src=e,t.allowFullscreen=!0,t.referrerPolicy="strict-origin-when-cross-origin",t.className="w-full h-full",t.addEventListener("load",()=>{}),a.appendChild(t)}return a}function y(n){return document.createElement("div")}function x(){let n=document.createElement("div");{const e=localStorage.getItem("channels")||"[]";JSON.parse(e).push({id:"UCEi0DIwuAQNe68OK_1hAN7w",videos:[{id:"hFOkrLuf94M"},{id:"saVzevTylc4"}]}),console.log(JSON.parse(localStorage.getItem("channels")||"[]"))}{const e=localStorage.getItem("videos")||"[]",t=JSON.parse(e);t.push({id:"saVzevTylc4"}),t.push({id:"hFOkrLuf94M"}),console.log(JSON.parse(localStorage.getItem("videos")||"[]"))}const a=JSON.parse(localStorage.getItem("videos")||"[]");n=E(a);{const e=document.createElement("input");e.type="text",e.placeholder="Type something and press Enter",e.className="w-80 p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-100 shadow-sm",e.style="font-family: 'Roboto', sans-serif",e.addEventListener("keydown",t=>{if(t.key==="Enter"){console.log(e.value);const o=b({id:e.value,time:"0"});e.value="",n.appendChild(o)}}),n.appendChild(e)}return n}function g(){const n=document.createElement("div");n.className="flex p-3 bg-white text-black dark:bg-neutral-900 dark:text-white";{const a=document.createElement("div");a.className="flex cursor-pointer",a.addEventListener("click",()=>{const e=new CustomEvent("logo-click");n.dispatchEvent(e)}),n.appendChild(a);{const e=document.createElement("img");e.className="w-9 h-9 ml-4 mr-1",e.src="./narval.png",a.appendChild(e)}{const e=document.createElement("div");e.className="text-3xl font-bold pr-3 font-sans hidden lg:block",e.textContent="narval",e.style="font-family: 'Roboto', sans-serif",a.appendChild(e)}}return n}function C(n){const a={id:n},e=document.createElement("div");{const t=document.createElement("p");t.textContent="",t.className="text-xl font-bold line-clamp-2 pt-3 pl-6 text-black dark:text-white text-[19px] tracking-[-0.0px] transform scale-y-100",t.style="font-family: 'Roboto', sans-serif font-variant-numeric: tabular-nums;",e.appendChild(t);const o=document.createElement("p");o.textContent="",o.className="text-sm font-bold line-clamp-2 pt-2 pl-6 text-black dark:text-white",o.style="font-family: 'Roboto', sans-serif font-variant-numeric: tabular-nums;",e.appendChild(o);{const r=`https://www.youtube.com/oembed?url=https://www.youtube.com/watch?v=${a.id}&format=json`;fetch(r).then(s=>s.json()).then(s=>{t.textContent=s.title,o.textContent=s.author_name})}}return e}function v(){const n=document.createElement("div");return n.className="h-20 bg-white dark:bg-neutral-900",n}function k(){const n=document.createElement("button");return n.className="relative ml-5 mt-4 p-4 rounded-full bg-neutral-900 dark:bg-white",n.addEventListener("click",()=>{const a=new CustomEvent("fullscreen-click",{});n.dispatchEvent(a)}),n}function m(n){let a=[];const e=document.getElementById("app");if(!e)throw new Error("app not found");const t=new Map;t.set("/",()=>{document.title="Narval",fetch("videos.json").then(r=>r.json()).then(r=>{a=r;const s=g(),c=E(a),l=v(),u=document.createElement("nav");u.className="absolute w-full p-7 fixed bottom-0 left-0 right-0 lg:hidden z-2 opacity-90 backdrop-blur-md bg-gray-100 dark:bg-neutral-900",c.addEventListener("video-click",i=>{const d=i.detail.video;let p="";d.time>0&&(p=`&t=${d.time}`);let h=`/video?v=${d.id}`+p;history.pushState({},"",h),m("/video")}),s.addEventListener("logo-click",i=>{}),e.innerHTML="",e.appendChild(s),e.appendChild(c),e.appendChild(l),e.appendChild(u)})}),t.set("/feed",()=>{history.pushState({},"","/"),m("/")}),t.set("/video",()=>{document.title="Narval - Video";const r=new URLSearchParams(globalThis.location.search),s=r.get("v")||"",c=r.get("t")||"0",l={id:s,time:c},u=w(l),i=g(),f=C(l.id),d=v(),p=k();i.addEventListener("logo-click",h=>{history.pushState({},"","/"),m("/")}),p.addEventListener("fullscreen-click",h=>{document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen({navigationUI:"hide"})}),e.innerHTML="",e.appendChild(i),e.appendChild(u),e.appendChild(f),e.appendChild(d)}),t.set("/channel",()=>{document.title="Narval - Channel",new URLSearchParams(globalThis.location.search).get("c");const s=y();e.innerHTML="",e.appendChild(s)}),t.set("/library",()=>{document.title="Narval - Library",e.innerHTML="",e.appendChild(x())}),t.get(n)()}function N(){const n=globalThis.location.pathname;globalThis.addEventListener("popstate",a=>{m(globalThis.location.pathname)}),m(n)}N();
