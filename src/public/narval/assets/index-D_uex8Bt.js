(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))t(l);new MutationObserver(l=>{for(const a of l)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&t(s)}).observe(document,{childList:!0,subtree:!0});function e(l){const a={};return l.integrity&&(a.integrity=l.integrity),l.referrerPolicy&&(a.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?a.credentials="include":l.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function t(l){if(l.ep)return;l.ep=!0;const a=e(l);fetch(l.href,a)}})();function y(o){const n=`https://www.youtube.com/oembed?url=https://www.youtube.com/watch?v=${o.id}&format=json`,e=`https://img.youtube.com/vi/${o.id}/maxresdefault.jpg`,t=document.createElement("a");t.className="relative overflow-hidden bg-white p-0 hover:scale-100 transition-all duration-180 md:rounded-lg bg-white text-black dark:bg-neutral-900 dark:text-white";let l=`/video?v=${o.id}`;o.time!="0"&&(l+=`&t=${o.time}`),t.href=l;const a=document.createElement("div");a.className="rounded-md aspect-video relative bg-gray-50 dark:bg-neutral-800",t.appendChild(a);const s=document.createElement("div");s.className="h-7 m-3 rounded-lg animate-pulse z-10 bg-gray-200 dark:bg-neutral-700",t.appendChild(s);const c=document.createElement("div");c.className="h-2 m-2 w-1/4 rounded-full animate-pulse bg-gray-200 dark:bg-neutral-700",t.appendChild(c);{const i=document.createElement("div");i.className="h-1 sm:hidden bg-gray-200 dark:bg-neutral-700",t.appendChild(i)}return fetch(n).then(i=>i.json()).then(i=>{{const r=document.createElement("img");r.src=e,r.className="sm:rounded-md relative w-full h-full aspect-video object-cover opacity-0 transition-opacity duration-500 z-1",r.loading="lazy",r.onload=()=>{r.classList.add("opacity-100")},a.appendChild(r)}{const r=document.createElement("img");r.src=e,r.className="absolute inset-0 w-full h-full object-cover z-0 opacity-20 blur-3xl scale-80 saturate-1000 contrast-100 brightness-100 dark:contrast-20",r.loading="lazy",t.appendChild(r)}{const r=document.createElement("p");r.textContent=i.title,r.className="relative text-sm text-black line-clamp-2 items-center align-center m-2 z-1 min-h-[3rem] leading-[1.5rem] text-black dark:text-white",r.style="font-family: 'Roboto', sans-serif",s.replaceWith(r)}{const r=document.createElement("p");r.textContent=i.author_name,r.className="relative bottom-0 text-xs m-2 line-clamp-2 z-1 text-gray-500 dark:text-gray-400",r.style="font-family: 'Roboto', sans-serif",r.style.cursor="pointer",c.replaceWith(r)}t.style.cursor="pointer",t.addEventListener("click",()=>{const r=new CustomEvent("video-click",{detail:{video:o}});t.dispatchEvent(r)})}),t}function x(o){const n=document.createElement("div");{const e=document.createElement("div");e.className="sm:p-3 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 p-0 sm:gap-3 bg-white text-black dark:bg-neutral-900 dark:text-white",n.appendChild(e);for(const t of o){const l=y(t);e.appendChild(l),l.addEventListener("click",a=>{a.button===0&&a.preventDefault();const s=new CustomEvent("video-click",{detail:{video:t}});n.dispatchEvent(s)})}}return n}function N(o){const n=document.createElement("div");n.className="relative w-full aspect-video lg:aspect-[2.15/1]";{const e=`https://www.youtube-nocookie.com/embed/${o.id}?start=${o.time}`,t=document.createElement("iframe");t.setAttribute("sandbox","allow-presentation allow-same-origin allow-scripts"),t.allow="clipboard-write",t.style.margin="0px",t.style.padding="0px",t.src=e,t.allowFullscreen=!0,t.referrerPolicy="strict-origin-when-cross-origin",t.className="w-full h-full",t.addEventListener("load",()=>{}),n.appendChild(t)}return n}function L(o){return document.createElement("div")}function S(){let o=document.createElement("div");{const e=localStorage.getItem("channels")||"[]";JSON.parse(e).push({id:"UCEi0DIwuAQNe68OK_1hAN7w",videos:[{id:"hFOkrLuf94M"},{id:"saVzevTylc4"}]}),console.log(JSON.parse(localStorage.getItem("channels")||"[]"))}{const e=localStorage.getItem("videos")||"[]",t=JSON.parse(e);t.push({id:"saVzevTylc4"}),t.push({id:"hFOkrLuf94M"}),console.log(JSON.parse(localStorage.getItem("videos")||"[]"))}const n=JSON.parse(localStorage.getItem("videos")||"[]");o=x(n);{const e=document.createElement("input");e.type="text",e.placeholder="Type something and press Enter",e.className="w-80 p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-100 shadow-sm",e.style="font-family: 'Roboto', sans-serif",e.addEventListener("keydown",t=>{if(t.key==="Enter"){console.log(e.value);const l=y({id:e.value,time:"0"});e.value="",o.appendChild(l)}}),o.appendChild(e)}return o}function E(){const o=document.createElement("div");o.className="flex p-3 bg-white text-black dark:bg-neutral-900 dark:text-white";{const n=document.createElement("a");n.className="flex cursor-pointer",n.href="/",n.addEventListener("click",e=>{e.button===0&&e.preventDefault();const t=new CustomEvent("logo-click");o.dispatchEvent(t)}),o.appendChild(n);{const e=document.createElement("img");e.className="w-9 h-9 ml-4 mr-1",e.src="./narval.png",n.appendChild(e)}{const e=document.createElement("div");e.className="text-3xl font-bold pr-3 font-sans hidden lg:block",e.textContent="narval",e.style="font-family: 'Roboto', sans-serif",n.appendChild(e)}}return o}function T(o){const n={id:o},e=document.createElement("div");{const t=document.createElement("p");t.textContent="",t.className="text-xl font-bold line-clamp-2 pt-3 pl-6 text-black dark:text-white text-[19px] tracking-[-0.0px] transform scale-y-100",t.style="font-family: 'Roboto', sans-serif font-variant-numeric: tabular-nums;",e.appendChild(t);const l=document.createElement("p");l.textContent="",l.className="text-sm font-bold line-clamp-2 pt-2 pl-6 text-black dark:text-white",l.style="font-family: 'Roboto', sans-serif font-variant-numeric: tabular-nums;",e.appendChild(l);{const a=`https://www.youtube.com/oembed?url=https://www.youtube.com/watch?v=${n.id}&format=json`;fetch(a).then(s=>s.json()).then(s=>{t.textContent=s.title,l.textContent=s.author_name;const c=new CustomEvent("video-loaded",{detail:{video:{title:s.title}}});e.dispatchEvent(c)})}}return e}function w(){const o=document.createElement("div");return o.className="h-20 bg-white dark:bg-neutral-900",o}function O(o){const n=document.createElement("button");return n.className="text-white font-bold px-4 py-1 rounded-3xl bg-neutral-800 hover:bg-neutral-700",n.style.fontFamily="'Roboto', sans-serif",n.textContent="Share",n.addEventListener("click",()=>{navigator.clipboard.writeText(o).then(()=>{n.classList.add("ring-3","ring-neutral-400"),setTimeout(()=>{n.classList.remove("ring-3","ring-neutral-400")},600)}).catch(e=>{console.error("Clipboard copy failed:",e),n.textContent="Error"})}),n}function B(){const o=document.createElement("button");return o.className="relative ml-5 mt-4 p-4 rounded-full bg-neutral-900 dark:bg-white",o.addEventListener("click",()=>{const n=new CustomEvent("fullscreen-click",{});o.dispatchEvent(n)}),o}function m(o){let n=[];const e=document.getElementById("app");if(!e)throw new Error("app not found");const t=new Map;t.set("/",()=>{document.title="Narval",fetch("videos.json").then(a=>a.json()).then(a=>{n=a;const s=E(),c=x(n),i=w(),r=document.createElement("nav");r.className="absolute w-full p-7 fixed bottom-0 left-0 right-0 lg:hidden z-2 opacity-90 backdrop-blur-md bg-gray-100 dark:bg-neutral-900",c.addEventListener("video-click",u=>{const d=u.detail.video;let p="";d.time>0&&(p=`&t=${d.time}`);const v=`/video?v=${d.id}`+p;history.pushState({},"",v),m("/video")}),s.addEventListener("logo-click",u=>{}),e.innerHTML="",e.appendChild(s),e.appendChild(c),e.appendChild(i),e.appendChild(r)})}),t.set("/feed",()=>{history.pushState({},"","/"),m("/")}),t.set("/video",()=>{const a=new URLSearchParams(globalThis.location.search),s=a.get("v")||"",c=a.get("t")||"0",i={id:s,time:c};let r=`/video?v=${i.id}`;i.time!="0"&&(r+=`&t=${i.time}`);const u=N(i),f=E(),d=T(i.id),p=O(r),v=B(),C=w();f.addEventListener("logo-click",b=>{history.pushState({},"","/"),m("/")}),d.addEventListener("video-loaded",b=>{const k=b.detail.video;document.title=k.title}),v.addEventListener("fullscreen-click",b=>{document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen({navigationUI:"hide"})});const g=document.createElement("div");g.className="text-white p-4 flex-1 min-w-[200px]",g.appendChild(p);const h=document.createElement("div");h.className="flex flex-wrap",h.appendChild(d),h.appendChild(g),e.innerHTML="",e.appendChild(f),e.appendChild(u),e.appendChild(h),e.appendChild(C)}),t.set("/watch",()=>{const a=new URLSearchParams(globalThis.location.search);let s="/video";a.size>0&&(s+=`?${a.toString()}`),history.pushState({},"",s),m("/video")}),t.set("/channel",()=>{document.title="Narval - Channel",new URLSearchParams(globalThis.location.search).get("c");const s=L();e.innerHTML="",e.appendChild(s)}),t.set("/library",()=>{document.title="Narval - Library",e.innerHTML="",e.appendChild(S())}),t.get(o)()}function $(){const o=globalThis.location.pathname;globalThis.addEventListener("popstate",n=>{m(globalThis.location.pathname)}),m(o)}$();
